<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>get_preallocated_path</title>
      <meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2">
      <link rel="home" href="doc_tactic-developer.html" title="TACTIC Developer">
      <link rel="up" href="api_python_general_build.html" title="TACTIC Python Client API Reference">
      <link rel="prev" href="python-client-api_general_get_plugin_dir.html" title="get_plugin_dir">
      <link rel="next" href="python-client-api_general_get_protocol.html" title="get_protocol">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="python-client-api_general_get_plugin_dir.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">&nbsp;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="python-client-api_general_get_protocol.html">Next</a></td>
            </tr>
         </table>
      </div>
      <div class="section" title="get_preallocated_path">
         <div class="titlepage">
            <div>
               <div>
                  <h3 class="title"><a name="python-client-api_general_get_preallocated_path"></a>get_preallocated_path
                  </h3>
               </div>
            </div>
         </div>
         <p>
                <span class="bold"><strong> get_preallocated_path(snapshot_code, file_type='main', file_name='', mkdir=True, protocol='client_repo', ext='')</strong></span>
                
         </p>
         <p>Get the preallocated path for this snapshot.  It assumes that</p>
         <p>this checkin actually exists in the repository and will create virtual</p>
         <p>entities to simulate a checkin.  This method can be used to determine</p>
         <p>where a checkin will go.  However, the snapshot must exist </p>
         <p>using create_snapshot() or some other method.  For a pure virtual naming</p>
         <p>simulator, use get_virtual_snapshot_path().</p>
         <h4><a name="d0e5034"></a>param:
         </h4>
         <p>
                <span class="bold"><strong>snapshot_code </strong></span>
                 -  the code of a preallocated snapshot.  This can be
                
         </p>
         <p>create by get_snapshot()</p>
         <h4><a name="d0e5043"></a>keyparam:
         </h4>
         <p>
                <span class="bold"><strong>file_type </strong></span>
                 -  the type of file that will be checked in.  Some naming
                
         </p>
         <p>conventions make use of this information to separate directories</p>
         <p>for different file types</p>
         <p>
                <span class="bold"><strong>file_name </strong></span>
                 -  the desired file name of the preallocation.  This information
                
         </p>
         <p>may be ignored by the naming convention or it may use this as a</p>
         <p>base for the final file name</p>
         <p>
                <span class="bold"><strong>mkdir </strong></span>
                 -  an option which determines whether the directory of the
                
         </p>
         <p>preallocation should be created</p>
         <p>
                <span class="bold"><strong>protocol </strong></span>
                 -  It's either client_repo, sandbox, or None. It determines whether the
                
         </p>
         <p>path is from a client or server perspective</p>
         <p>
                <span class="bold"><strong>ext </strong></span>
                 -  force the extension of the file name returned
                
         </p>
         <h4><a name="d0e5082"></a>return:
         </h4>
         <p>
                <span class="bold"><strong>string </strong></span>
                 -  the path where add_file() expects the file to be checked into
                
         </p>
         <h4><a name="d0e5089"></a>example:
         </h4>
         <p>it saves time if you get the path and copy it to the final destination first. </p><pre class="screen">
snapshot = my.server.create_snapshot(search_key, context)
snapshot_code = snapshot.get('code')
file_name = 'input_file_name.txt'
orig_path = 'C:/input_file_name.txt'
path = my.server.get_preallocated_path(snapshot_code, file_type, file_name)

# the path where it is supposed to go is generated
new_dir = os.path.dirname(path)
if not os.path.exists(new_dir):
    os.makedirs(new_dir)
shutil.copy(orig_path, path)
my.server.add_file(snapshot_code, path, file_type, mode='preallocate')

</pre></div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="python-client-api_general_get_plugin_dir.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="api_python_general_build.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="python-client-api_general_get_protocol.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="doc_tactic-developer.html">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;</td>
            </tr>
         </table>
      </div>
   </body>
</html>