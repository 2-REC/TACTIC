<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>The TACTIC Script Editor</title>
      <meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2">
      <link rel="home" href="doc_tactic-developer.html" title="TACTIC Developer">
      <link rel="up" href="tactic-developer_developer_introduction.html" title="Developer Start-up">
      <link rel="prev" href="tactic-developer_developer_architecture-overview.html" title="Architecture Overview">
      <link rel="next" href="tactic-developer_client-api.html" title="Client API">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="tactic-developer_developer_architecture-overview.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">&nbsp;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="tactic-developer_client-api.html">Next</a></td>
            </tr>
         </table>
      </div>
      <div class="section" title="The TACTIC Script Editor">
         <div class="titlepage">
            <div>
               <div>
                  <h3 class="title"><a name="tactic-developer_developer_tactic-script-editor"></a>The TACTIC Script Editor
                  </h3>
               </div>
            </div>
         </div>
         <p>The TACTIC Script Editor allows for Javascript and Python based scripts to be written and
            stored in a "custom script" sObject. These scripts harness the power of Javascript in the
            web browser along with the power of the Python TACTIC Client API. They can be structured to
            run on a general execution, by a trigger or, they can be attached to a button to execute for
                    a specific sObject. 
         </p>
         <p>One of the main benefits with using this method of custom scripting in TACTIC is that the
                    script writer does not have to have direct access to the server's file system.
         </p>
         <p>
                    <span class="inlinemediaobject"><img src="media/script-editor_full-view.png"></span>
                
         </p>
         <div class="simplesect" title="Outputting to the Debug_Log Table With The TacticServerStub.log() Function">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="d0e138"></a>Outputting to the Debug_Log Table With The TacticServerStub.log() Function
                     </h4>
                  </div>
               </div>
            </div>
            <p>The TacticServerStub.log() method writes to the table named 'debug_log' in the sthpw
                           database.
            </p>
            <p>The first parameter of the TacticServerStub.log() method is named <span class="bold"><strong>level</strong></span>. The argument for <span class="bold"><strong>level</strong></span> can be one of the following keywords: 
            </p>
            <p>
                           
            </p>
            <div class="informaltable">
               <table border="1">
                  <colgroup>
                     <col>
                     <col>
                  </colgroup>
                  <tbody>
                     <tr>
                        <td><span class="bold"><strong>level</strong></span></td>
                        <td> critical | error | warning | info | debug - arbitrary debug
                                                           level category
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <p>
                       
            </p>
            <p>The TacticServerStub.log() method can be used as follows:</p>
            <p>
                           
            </p><pre class="screen">var server = TacticServerStub.get()
server.log('debug','My log message for the debug group.')</pre><p>
                       
            </p>
            <p>The debug level argument provides the convenience of grouping the Debug Log table by
                           debug levels. This table can be found under:
            </p>
            <p>
                           <span class="bold"><strong>Admin Views -&gt; Server -&gt; Debug Log</strong></span></p>
            <div class="mediaobject"><img src="media/debug_log.png"></div>
            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;">
               <h3 class="title">Note</h3>
               <p>These 5 debug levels are arbitrary.</p>
               <p>The only purpose the levels serve are to group the messages when they are sorted
                                  in the table.
               </p>
            </div>
         </div>
         <div class="simplesect" title="Outputting to the TACTIC Web Client Output Log With The log Methods">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="d0e186"></a>Outputting to the TACTIC Web Client Output Log With The log Methods
                     </h4>
                  </div>
               </div>
            </div>
            <p>While writing scripts in the TACTIC Script Editor, messages can be output to the
                               <span class="bold"><strong>Web Client Output Log</strong></span>.
            </p>
            <p>Below are the 5 Javascript methods in use. The most vocal method, log.critical(), is
                           at the top:
            </p>
            <div class="mediaobject"><img src="media/script_editor_log_messages.png"></div>
            <p>Below is the Output Log console from above the sample script. It can be found
                           under:
            </p>
            <p>
                           <span class="bold"><strong>Main Gear menu -&gt; Tools -&gt; Web Client Output
                                 Log</strong></span>.
            </p>
            <p>
                           
            </p>
            <div class="mediaobject"><img src="media/Web_Client_Output_Log.png"></div>
            <p>
                       
            </p>
            <p>The level of the log messages which appear in the Javascript Output Client Log can be
                           controlled.  The level can be adjusted under: <span class="bold"><strong>My Admin -&gt; User
                                     Preferences</strong></span>.
            </p>
            <p>
                           
            </p>
            <div class="mediaobject"><img src="media/debug_level_user_preferences.png"></div>
            <p>
                       
            </p>
            <p>Below is a table to illustrate what the setting for each level will display</p>
            <p>
                           
            </p>
            <div class="informaltable">
               <table border="1">
                  <colgroup>
                     <col>
                     <col>
                  </colgroup>
                  <tbody>
                     <tr>
                        <td><span class="bold"><strong>critical setting</strong></span></td>
                        <td> only display messages that are from log.critical()</td>
                     </tr>
                     <tr>
                        <td><span class="bold"><strong>error setting</strong></span></td>
                        <td> only display messages that are from log.critical() or
                                                           log.error()
                        </td>
                     </tr>
                     <tr>
                        <td><span class="bold"><strong>warning setting</strong></span></td>
                        <td> only display messages that are from log.critical() or
                                                           log.error() or log.warning()
                        </td>
                     </tr>
                     <tr>
                        <td><span class="bold"><strong>info setting</strong></span></td>
                        <td> only display messages that are from log.critical() or
                                                           log.error() or log.warning() or log.info()
                        </td>
                     </tr>
                     <tr>
                        <td><span class="bold"><strong>debug setting</strong></span></td>
                        <td> only display messages that are from log.critical() or
                                                           log.error() or log.warning() or log.info() or log.debug()
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <p>
                       
            </p>
            <p>For example, if the Web Client Logging Level is set in the preferences to the
                               <span class="bold"><strong>warning</strong></span> level, we will only see messages that are
                           from log.warning(), log.error() and log.critical(). ie. Only messages at the same level
                           or above that level will be displayed in the Web Client Output Log.
            </p>
            <div class="mediaobject"><img src="media/warning_level_example.png"></div>
         </div>
         <div class="simplesect" title="Client API JavaScript Samples">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="d0e271"></a>Client API JavaScript Samples
                     </h4>
                  </div>
               </div>
            </div>
            <p><span class="bold"><strong>Example 1: Insert A New
                                 sObject</strong></span></p><pre class="screen">// INSERT A NEW SOBJECT

var server = TacticServerStub.get();

var code = "truck";
var asset_name = "truck";
var description = "A model of a truck.";
var search_type = "toy_factory/lego_set";
var project = "toy_factory";
var data = {
    'code': code,
    'name': asset_name,
    'description': description
};

var search_key = server.build_search_key(search_type, code, project);
var result = server.insert(search_type, data);
log.debug(result);</pre><p><span class="italic">Results after insert:</span></p>
            <div class="mediaobject"><img src="media/insert.png"></div>
            <p><span class="bold"><strong>Example 2: Get An sObject by Its Search Key</strong></span></p>
            <p>
                           
            </p><pre class="screen">// GET BY SEARCH_KEY
var server = TacticServerStub.get();

var search_type = "toyrus/lego_set";
var code = "model_crane";
var project = "toyrus";

var search_key = server.build_search_key(search_type, code, project);
var result = server.get_by_search_key(search_key);
alert(result.description);
server.log("debug", result);</pre><p>
                       
            </p>
            <p><span class="italic">Results after get_by_search_key():</span></p>
            <div class="mediaobject"><img src="media/get_by_search_key.png"></div>
            <p><span class="bold"><strong>Example 3: Update An Existing
                                     sObject</strong></span></p><pre class="screen">// UPDATE EXISTING SOBJECT

var server = TacticServerStub.get();

var code = "model_crane";
var project = "toyrus";
var asset_name = "model crane";
var description = "Revised description of a crane.";
var search_type = "toyrus/lego_set";
var data = {
    'code': code,
    'name': asset_name,
    'description': description
};
var search_key = server.build_search_key(search_type, code, project);
var result = server.update(search_key, data);
server.log("debug", result);</pre><p><span class="italic">Results after update:</span></p>
            <div class="mediaobject"><img src="media/update.png"></div>
            <p><span class="bold"><strong>Example 4: Retire An Existing
                                     sObject</strong></span></p><pre class="screen">// RETIRE AN EXISTING OBJECT

var server = TacticServerStub.get();

var search_type = "toyrus/lego_set";
var code = "model_crane";
var project = "toyrus";

var search_key = server.build_search_key(search_type, code, project);
var results = server.retire_sobject(search_key);
server.log("debug", result);</pre><p><span class="italic">Results after retire:</span></p>
            <div class="mediaobject"><img src="media/delete.png"></div>
         </div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="tactic-developer_developer_architecture-overview.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="tactic-developer_developer_introduction.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="tactic-developer_client-api.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="doc_tactic-developer.html">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;</td>
            </tr>
         </table>
      </div>
   </body>
</html>