<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Custom Layout</title>
      <meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2">
      <link rel="home" href="doc_tactic-setup.html" title="TACTIC Setup">
      <link rel="up" href="tactic-setup_tactic-widgets-layout.html" title="Layout Widgets">
      <link rel="prev" href="tactic-setup_setup_view-panel-wdg.html" title="View Panel">
      <link rel="next" href="tactic-setup_setup_table-layout-wdg.html" title="Table Layout">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="tactic-setup_setup_view-panel-wdg.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">&nbsp;</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="tactic-setup_setup_table-layout-wdg.html">Next</a></td>
            </tr>
         </table>
      </div>
      <div class="section" title="Custom Layout">
         <div class="titlepage">
            <div>
               <div>
                  <h4 class="title"><a name="tactic-setup_setup_custom-layout-wdg"></a>Custom Layout
                  </h4>
               </div>
            </div>
         </div>
         <div class="mediaobject"><img src="media/1_custom-layout_tickets-welcome.png"></div>
         <div class="simplesect" title="Description">
            <div class="titlepage">
               <div>
                  <div>
                     <h5 class="title"><a name="d0e12365"></a>Description
                     </h5>
                  </div>
               </div>
            </div>
            <p>The Custom Layout Widget is a simple tool which opens up an incredible amount of
               customizable interface flexibility and integration from within the TACTIC UI. This
               widget provides a container in the web page which supports embedding of HTML code
               including TACTIC Widgets, Expressions and Behaviours. This allows development of complex
               widgets similar to the standard widgets delivered with TACTIC.
            </p>
            <p>With this, the following examples can be achieved:</p>
            <div class="itemizedlist">
               <ul class="itemizedlist">
                  <li class="listitem">
                     <p>Custom reports can be made which include dynamic TACTIC Expressions presented
                                            in a customized web page design.
                     </p>
                  </li>
                  <li class="listitem">
                     <p>Views can be assembled using a combination of TACTIC widgets along with
                                            regular HTML elements.
                     </p>
                  </li>
                  <li class="listitem">
                     <p>Embeddable web code such as Google maps, timezone clocks, web mail clients
                                            etc. can be embedded in the TACTIC interface.
                     </p>
                  </li>
               </ul>
            </div>
         </div>
         <div class="simplesect" title="Info">
            <div class="titlepage">
               <div>
                  <div>
                     <h5 class="title"><a name="d0e12382"></a>Info
                     </h5>
                  </div>
               </div>
            </div>
            <div class="informaltable">
               <table border="1">
                  <colgroup>
                     <col>
                     <col>
                  </colgroup>
                  <tbody>
                     <tr>
                        <td>
                                                       
                           <p><span class="bold"><strong>Name</strong></span></p>
                                                   
                        </td>
                        <td>CustomLayoutWdg</td>
                     </tr>
                     <tr>
                        <td>
                                                       
                           <p><span class="bold"><strong>Class</strong></span></p>
                                                   
                        </td>
                        <td>tactic.ui.panel.CustomLayoutWdg</td>
                     </tr>
                     <tr>
                        <td>
                                                       
                           <p><span class="bold"><strong>TACTIC Version Support</strong></span></p>
                                                   
                        </td>
                        <td>2.5.0 +</td>
                     </tr>
                     <tr>
                        <td>
                                                       
                           <p><span class="bold"><strong>Required database columns</strong></span></p>
                                                   
                        </td>
                        <td>none</td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <div class="simplesect" title="Implementation">
            <div class="titlepage">
               <div>
                  <div>
                     <h5 class="title"><a name="d0e12426"></a>Implementation
                     </h5>
                  </div>
               </div>
            </div>
            <p>The Custom Layout Widget in its simplest form is a delivery mechanism for HTML code.
                           The following "Hello World" example below demonstrates this.
            </p>
            <div class="mediaobject"><img src="media/2_custom_layout_hello_world_view.png"></div><pre class="screen">&lt;element name="hello_world"&gt;
  &lt;display class="tactic.ui.panel.CustomLayoutWdg"&gt;
    &lt;html&gt;
       &lt;h2&gt;Hello World&lt;/h2&gt;
    &lt;/html&gt;
  &lt;/display&gt;
&lt;/element&gt;</pre><p>Where a large part of the considerations for usage of a Custom Layout is where it will
                           be embedded and how it will get retrieved. There are a few ways to implement this
                           widget:
            </p>
            <div class="itemizedlist">
               <ul class="itemizedlist">
                  <li class="listitem">
                     <p>In a cell (element) in a TableLayoutWdg (Example 1a). </p>
                  </li>
                  <li class="listitem">
                     <p>In the widget config, then called from a link in the sidebar (Example
                                            1b).
                     </p>
                  </li>
                  <li class="listitem">
                     <p>In the widget config, than called from a Custom Script (Javascript) (Example
                                            1c).
                     </p>
                  </li>
               </ul>
            </div>
            <p>Once a delivery method has been decided, it also needs to be decided if the custom
                           Layout will need to evaluate based on an item being passed in as the parent or 'starting
                           point' (technically speaking a 'relative' expression). For example, to use a
                           CustomLayout to display a report for a item, the dynamic data in the CustomLayout needs
                           to be derived starting from the specified item.
            </p>
            <p>Taking advantage of relative expressions is usually accessed/assumed through the
                           search_key value for the widget. This is most often done through TACTIC Expressions
                           embedded in the HTML code or, through JavaScript code interacting with the CustomLayout.
                           Either way, the search_key value must me passed into the widget for relative behavior.
                           A simple example is that a button in a table can pass in the search key based on the
                           item (row) it was clicked for.   This would allow for loading of a custom dashboard
                           which shows all information pertaining to that item.
            </p>
            <p><span class="bold"><strong>Embedded Expressions</strong></span>
                       
            </p>
            <p>Expressions can be embedded in the Custom Layout through usage of a [expr] style tag.
                           This Tag allows for embedding of expressions that are evaluated before the HTML which
                           provide the resulting values into the HTML code. 
            </p>
            <p>The following example displays the task status of the modelling process.</p><pre class="screen">&lt;element name="hello_world"&gt;
 &lt;display class="tactic.ui.panel.CustomLayoutWdg"&gt;
  &lt;html&gt;
   &lt;div&gt;
     Model Status: [expr]@GET(sthpw/task['process', 'model'].status)[/expr]
   &lt;/div&gt;
  &lt;/html&gt;
 &lt;/display&gt;
&lt;/element&gt;</pre><p><span class="bold"><strong>Embedded Widgets</strong></span></p>
            <p>The CustomLayoutWdg provides full support for embedding of TACTIC Widgets. For example
                           TableLayoutWdg and EditWdg can placed in a CustomLayout. This for allows, for example,
                           the ability to create a 'dashboard' which can show multiple Tables, CustomLayouts HTML,
                           etc.
            </p><pre class="screen">&lt;element name="hello_widget"&gt;
  &lt;display class="tactic.ui.table.CustomLayoutwdg"&gt;
    &lt;html&gt;
      &lt;element name="tasks"&gt;
        &lt;display class="TableLayoutWdg"&gt;
          &lt;search_type&gt;sthpw/task&lt;/search_type&gt;
          &lt;view&gt;task_list&lt;/view&gt;
          &lt;mode&gt;simple&lt;/mode&gt;
          &lt;do_search&gt;true&lt;/do_search&gt;
<span class="bold"><strong>          &lt;search_key&gt;{@GET(state.search_key)}&lt;/search_key&gt;</strong></span>
        &lt;/display&gt;
      &lt;/element&gt;
    &lt;/html&gt;
  &lt;/display&gt;
&lt;/element&gt;</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;">
               <h3 class="title">Note</h3>
               <p>In the example above, the &lt;search_key&gt; option is automatically being passed the
                                  search_key from the state of the overall Custom Layout.  What this will do is pass
                                  in the searhc key to the table which will automatically filter it to only show items
                                  related to the search_key (parent).  For example in a dashboard for a shot, the
                                  tasks table will only display tasks related to the shot as opposed to all tasks in
                                  the system.
               </p>
            </div>
            <p><span class="bold"><strong>Embedded Behaviours</strong></span></p>
            <p>The Custom Layout also supports usage of the TACTIC JavaScript Behaviour system. With
                           this, elements in the Custom Layout can contain embedded behaviours which allow for
                           creation of custom interfaces and utilities. This opens up full a connection with the
                           interface, clientAPI and Java Applet.
            </p><pre class="screen">&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;config&gt;
  &lt;hello_world&gt;
    &lt;html&gt;
      &lt;span&gt;This is a button:&lt;/span&gt;
      &lt;input type='button' class='spt_button1' value='Press Me'/&gt;
    &lt;/html&gt;
    &lt;behavior class='spt_button1'&gt;{
     "type": "click_up",
     "cbjs_action": '''
         alert('Hello World');
     '''
    }&lt;/behavior&gt;
  &lt;/hello_world&gt;
&lt;/config&gt;</pre></div>
         <div class="simplesect">
            <div class="titlepage"></div>
            <h4><a name="d0e12483"></a>Options
            </h4>
            <div class="informaltable">
               <table border="1">
                  <colgroup>
                     <col>
                     <col>
                  </colgroup>
                  <tbody>
                     <tr>
                        <td>
                                                       
                           <p><span class="bold"><strong>view</strong></span></p>
                                                   
                        </td>
                        <td>The view to retrieve from the Widget Config. This is not required if
                                                       the HTML option is supplied.
                        </td>
                     </tr>
                     <tr>
                        <td>
                                                       
                           <p><span class="bold"><strong>html</strong></span></p>
                                                   
                        </td>
                        <td>This option is where the HTML code is embedded.</td>
                     </tr>
                     <tr>
                        <td>
                                                       
                           <p><span class="bold"><strong>search_type</strong></span></p>
                                                   
                        </td>
                        <td>The Search Type the CustomLayoutWdg applies to (if
                                                       applicable)
                        </td>
                     </tr>
                  </tbody>
               </table>
            </div>
         </div>
         <div class="simplesect" title="Examples">
            <div class="titlepage">
               <div>
                  <div>
                     <h5 class="title"><a name="d0e12517"></a>Examples
                     </h5>
                  </div>
               </div>
            </div>
            <h5><a name="d0e12520"></a>Example 1a
            </h5>
            <p>This can be stored in the definition view and called as an element by name
                           (&lt;element name="hello_world"/&gt;) or, directly in the view config. 
            </p>
            <div class="mediaobject"><img src="media/3_custom_layout_hello_world_config.png"></div>
            <p>If added to the definition, it will be available as a Widget Column in the <span class="bold"><strong>Column Manager</strong></span>. 
            </p>
            <div class="mediaobject"><img src="media/4_custom_layout_hello_world_column_manager.png"></div><pre class="screen">&lt;config&gt;
  &lt;definition&gt;
    &lt;element name="preview"/&gt;
    &lt;element name="code"/&gt;

    &lt;element name="hello_world"&gt;
      &lt;display class="tactic.ui.panel.CustomLayoutWdg"&gt;
        &lt;html&gt;
           &lt;h2&gt;Hello World&lt;/h2&gt;
        &lt;/html&gt;
      &lt;/display&gt;
    &lt;/element&gt;

  &lt;/definition&gt;
&lt;/config&gt;</pre><h5><a name="d0e12537"></a>Example 1b
            </h5>
            <p>The following example shows how to create a sidebar link which loads a Custom Layout
                           view defined in the Widget Config.
            </p>
            <div class="orderedlist">
               <ol class="orderedlist" type="1">
                  <li class="listitem">
                     <p>In the Widget Config enter the following hello_world view. This can be called
                                            from The Javascript code and sent to a popup.
                     </p>
                     <div class="mediaobject"><img src="media/5_custom_layout_hello_world.png"></div>
                  </li>
                  <li class="listitem">
                     <p>The link can be configured in the Project Views Manager. Under the action
                                            menu, select "New Link". In the pop-up, Fill the options as shown in the
                                            following image.
                     </p>
                     <div class="mediaobject"><img src="media/6_custom_layout_example1_manage_my_views.png"></div>
                  </li>
                  <li class="listitem">
                     <p>Once the link is saved, select it in the Preview of Side Bar to load its
                                            options into the Element Detail panel on the right. Once loaded switch the mode
                                            to 'Advanced' and double check that the XML config contains the
                                            following:
                     </p><pre class="screen">&lt;element name="hello_world" title="Hello World" icon="APPROVED" state="" is_visible="on"&gt;
  &lt;display class="LinkWdg"&gt;
    &lt;class_name&gt;tactic.ui.panel.CustomLayoutWdg&lt;/class_name&gt;
    &lt;view&gt;example01&lt;/view&gt;
  &lt;/display&gt;
&lt;/element&gt;</pre><div class="mediaobject"><img src="media/9_custom_layout_example_1b_xml.png"></div>
                  </li>
               </ol>
            </div>
            <h5><a name="d0e12562"></a>Example 1c
            </h5>
            <p>The following example shows how to create a CustomLayoutWdg View in the widget config
                           then, call it from the Javascript Editor
            </p>
            <div class="orderedlist">
               <ol class="orderedlist" type="1">
                  <li class="listitem">
                     <p>In the Widget Config enter the following hello_world view. This can be called
                                            from The Javascript code and sent to a pop-up.
                     </p>
                     <div class="mediaobject"><img src="media/10_custom_layout_example_1c_config.png"></div>
                  </li>
                  <li class="listitem">
                     <p>In the Javascript Editor create the following custom script example to load
                                            the view into a pop-up. 
                     </p><pre class="screen">kwargs = {
 view: 'hello_world',
};

spt.panel.load_popup('Custom Layout Popup', \
    'tactic.ui.panel.CustomLayoutWdg', kwargs); </pre><div class="mediaobject"><img src="media/11_custom_layout_example_1c_Script_Editor.png"></div>
                  </li>
               </ol>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="tactic-setup_setup_view-panel-wdg.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="tactic-setup_tactic-widgets-layout.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="tactic-setup_setup_table-layout-wdg.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="doc_tactic-setup.html">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;</td>
            </tr>
         </table>
      </div>
   </body>
</html>